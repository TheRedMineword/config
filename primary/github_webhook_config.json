{
    "file_rules": [
        { "match": "ws_players.json", "webhook": "dbupdate" },
    { "match": "primary/config.json", "webhook": "dbupdate" }
],
    "event_webhook": {
        "xyz": "stars"
    },
    "use_custom_handler_for_events": [
        "push"
    ],
    "custom_handler_b64": "Ly8gQ3VzdG9tIGhhbmRsZXIgZm9yIHB1c2ggZXZlbnRzIHdpdGggdGhlbWVkIHN0eWxpbmcgZm9yIHNwZWNpYWwgZGF0YWJhc2UgZmlsZXMKaWYgKGV2ZW50ID09PSAicHVzaCIpIHsKICBlbWJlZHMubGVuZ3RoID0gMDsgLy8gY2xlYXIgZGVmYXVsdCBlbWJlZHMKCiAgY29uc3QgeyByZXBvc2l0b3J5LCByZWYsIGNvbW1pdHMsIHB1c2hlciwgY29tcGFyZSB9ID0gcGF5bG9hZDsKICBjb25zdCBicmFuY2ggPSByZWYuc3BsaXQoIi8iKS5wb3AoKTsKICBjb25zdCBzaG9ydEJyYW5jaCA9IGJyYW5jaC5sZW5ndGggPiAzMCA/IGJyYW5jaC5zbGljZSgwLCAyNykgKyAiLi4uIiA6IGJyYW5jaDsKCiAgLy8gR2F0aGVyIGFsbCBjaGFuZ2VkIGZpbGVzCiAgY29uc3QgY2hhbmdlZEZpbGVzID0gY29tbWl0cy5mbGF0TWFwKGMgPT4gWy4uLmMuYWRkZWQsIC4uLmMubW9kaWZpZWQsIC4uLmMucmVtb3ZlZF0pOwoKICBjb25zdCBpc1doaXRlRmlsZSA9IGNoYW5nZWRGaWxlcy5zb21lKGYgPT4gZi5pbmNsdWRlcygid3NfcGxheWVycy5qc29uIikpOwogIGNvbnN0IGlzUHJpbWFyeUZpbGUgPSBjaGFuZ2VkRmlsZXMuc29tZShmID0+IGYuaW5jbHVkZXMoInByaW1hcnkvY29uZmlnLmpzb24iKSk7CgogIC8vIFRoZW1lIHBhbGV0dGUKICBsZXQgYWNjZW50Q29sb3IgPSAweDAwY2NmZjsgLy8gZGVmYXVsdCBjeWFuLWJsdWUKICBsZXQgc2Vjb25kYXJ5Q29sb3IgPSAweDg4Y2M4ODsgLy8gZGVmYXVsdCBncmVlbgogIGxldCB0aXRsZUljb24gPSAi8J+TpiI7CiAgbGV0IGNoYW5nZUljb24gPSAi8J+ThCI7CiAgbGV0IHRpdGxlVGV4dCA9IGBQdXNoZWQgdG8gJHtyZXBvc2l0b3J5Lm5hbWV9OiR7c2hvcnRCcmFuY2h9YDsKICBsZXQgc2hvd0RpZmYgPSB0cnVlOwoKICBpZiAoaXNXaGl0ZUZpbGUpIHsKICAgIGFjY2VudENvbG9yID0gMHhmZmZmZmY7CiAgICBzZWNvbmRhcnlDb2xvciA9IDB4ZWVlZWVlOwogICAgdGl0bGVJY29uID0gIvCfpI0iOwogICAgdGl0bGVUZXh0ID0gIkRhdGFiYXNlIFVwZGF0ZWQiOwogICAgc2hvd0RpZmYgPSBmYWxzZTsKICB9IGVsc2UgaWYgKGlzUHJpbWFyeUZpbGUpIHsKICAgIGFjY2VudENvbG9yID0gMHhmZjQ0NDQ7IC8vIHJlZAogICAgc2Vjb25kYXJ5Q29sb3IgPSAweDAwZmZmZjsgLy8gY3lhbgogICAgdGl0bGVJY29uID0gIuKdpO+4j/CfkpkiOwogICAgdGl0bGVUZXh0ID0gIlByaW1hcnkgRGF0YWJhc2UgVXBkYXRlZCI7CiAgICBzaG93RGlmZiA9IGZhbHNlOwogIH0KCiAgLy8gQ29tbWl0IHN1bW1hcnkKICBjb25zdCBjb21taXRMaW5lcyA9IGNvbW1pdHMKICAgIC5tYXAoYyA9PiBgW1xgJHtjLmlkLnNsaWNlKDAsIDcpfVxgXSgke2MudXJsfSkg4oCUICR7Yy5tZXNzYWdlLnNwbGl0KCJcbiIpWzBdfWApCiAgICAuam9pbigiXG4iKTsKCiAgLy8gLS0tIE1haW4gRW1iZWQgLS0tCiAgZW1iZWRzLnB1c2goewogICAgYXV0aG9yLAogICAgdGl0bGU6IGAke3RpdGxlSWNvbn0gJHt0aXRsZVRleHR9YCwKICAgIGRlc2NyaXB0aW9uOgogICAgICBgKipCeToqKiAke3B1c2hlci5uYW1lIHx8IHB1c2hlci5lbWFpbH1cbmAgKwogICAgICBgJHtjb21wYXJlID8gYFtWaWV3IENoYW5nZXNdKCR7Y29tcGFyZX0pYCA6ICIifVxuXG5gICsKICAgICAgY29tbWl0TGluZXMsCiAgICBjb2xvcjogYWNjZW50Q29sb3IsCiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICB9KTsKCiAgLy8gLS0tIE9wdGlvbmFsIGZpbGUgZGlmZiBzdW1tYXJ5IChza2lwIGZvciB3aGl0ZS9wcmltYXJ5IG1vZGVzKSAtLS0KICBpZiAoc2hvd0RpZmYpIHsKICAgIGNvbnN0IGFkZGVkID0gW10sIHJlbW92ZWQgPSBbXSwgbW9kaWZpZWQgPSBbXTsKICAgIGZvciAoY29uc3QgY29tbWl0IG9mIGNvbW1pdHMpIHsKICAgICAgYWRkZWQucHVzaCguLi5jb21taXQuYWRkZWQpOwogICAgICByZW1vdmVkLnB1c2goLi4uY29tbWl0LnJlbW92ZWQpOwogICAgICBtb2RpZmllZC5wdXNoKC4uLmNvbW1pdC5tb2RpZmllZCk7CiAgICB9CgogICAgY29uc3QgdG90YWxDaGFuZ2VzID0gYWRkZWQubGVuZ3RoICsgcmVtb3ZlZC5sZW5ndGggKyBtb2RpZmllZC5sZW5ndGg7CiAgICBpZiAodG90YWxDaGFuZ2VzID4gMCkgewogICAgICBjb25zdCBtYXhTaG93biA9IDIwOwogICAgICBjb25zdCBkaWZmTGluZXMgPSBbXTsKCiAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBhZGRlZC5zbGljZSgtbWF4U2hvd24pKSBkaWZmTGluZXMucHVzaChgKyAke2ZpbGV9YCk7CiAgICAgIGZvciAoY29uc3QgZmlsZSBvZiByZW1vdmVkLnNsaWNlKC1tYXhTaG93bikpIGRpZmZMaW5lcy5wdXNoKGAtICR7ZmlsZX1gKTsKICAgICAgZm9yIChjb25zdCBmaWxlIG9mIG1vZGlmaWVkLnNsaWNlKC1tYXhTaG93bikpIGRpZmZMaW5lcy5wdXNoKGB+ICR7ZmlsZX1gKTsKCiAgICAgIGlmICh0b3RhbENoYW5nZXMgPiBkaWZmTGluZXMubGVuZ3RoKSB7CiAgICAgICAgZGlmZkxpbmVzLnB1c2goYC4uLiBzaG93aW5nIGxhc3QgJHtkaWZmTGluZXMubGVuZ3RofS8ke3RvdGFsQ2hhbmdlc30gY2hhbmdlcyAuLi5gKTsKICAgICAgfQoKICAgICAgZW1iZWRzLnB1c2goewogICAgICAgIGF1dGhvciwKICAgICAgICB0aXRsZTogYPCfk4QgRmlsZSBDaGFuZ2VzYCwKICAgICAgICBkZXNjcmlwdGlvbjogImBgYGRpZmZcbiIgKyBkaWZmTGluZXMuam9pbigiXG4iKSArICJcbmBgYCIsCiAgICAgICAgY29sb3I6IHNlY29uZGFyeUNvbG9yLAogICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICB9KTsKICAgIH0KICB9Cn0="
}
