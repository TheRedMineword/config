{
    "file_rules": [
        { "match": "ws_players.json", "webhook": "dbupdate" },
    { "match": "primary/config.json", "webhook": "dbupdate" }
],
    "event_webhook": {
        "xyz": "stars"
    },
    "use_custom_handler_for_events": [
        "push"
    ],
    "custom_handler_b64": "Ly8gQ3VzdG9tIGhhbmRsZXIgZm9yIHB1c2ggZXZlbnRzIHdpdGggdGhlbWVkIHN0eWxpbmcgZm9yIHNwZWNpYWwgZGF0YWJhc2UgZmlsZXMKaWYgKGV2ZW50ID09PSAicHVzaCIpIHsKICBlbWJlZHMubGVuZ3RoID0gMDsgLy8gY2xlYXIgZGVmYXVsdCBlbWJlZHMKCiAgY29uc3QgeyByZXBvc2l0b3J5LCByZWYsIGNvbW1pdHMsIHB1c2hlciwgY29tcGFyZSB9ID0gcGF5bG9hZDsKICBjb25zdCBicmFuY2ggPSByZWYuc3BsaXQoIi8iKS5wb3AoKTsKICBjb25zdCBzaG9ydEJyYW5jaCA9IGJyYW5jaC5sZW5ndGggPiAzMCA/IGJyYW5jaC5zbGljZSgwLCAyNykgKyAiLi4uIiA6IGJyYW5jaDsKCiAgLy8gR2F0aGVyIGFsbCBjaGFuZ2VkIGZpbGVzCiAgY29uc3QgY2hhbmdlZEZpbGVzID0gY29tbWl0cy5mbGF0TWFwKGMgPT4gWy4uLmMuYWRkZWQsIC4uLmMubW9kaWZpZWQsIC4uLmMucmVtb3ZlZF0pOwoKICBjb25zdCBpc1doaXRlRmlsZSA9IGNoYW5nZWRGaWxlcy5zb21lKGYgPT4gZi5pbmNsdWRlcygid3NfcGxheWVycy5qc29uIikpOwogIGNvbnN0IGlzUHJpbWFyeUZpbGUgPSBjaGFuZ2VkRmlsZXMuc29tZShmID0+IGYuaW5jbHVkZXMoInByaW1hcnkvY29uZmlnLmpzb24iKSk7CiAgY29uc3QgaXNNb3RkRmlsZSA9IGNoYW5nZWRGaWxlcy5zb21lKGYgPT4gZi5pbmNsdWRlcygicHJpbWFyeS9tb3RkLmpzb24iKSk7CgogIC8vIFRoZW1lIHBhbGV0dGUKICBsZXQgYWNjZW50Q29sb3IgPSAweDAwY2NmZjsgLy8gZGVmYXVsdCBjeWFuLWJsdWUKICBsZXQgc2Vjb25kYXJ5Q29sb3IgPSAweDg4Y2M4ODsgLy8gZGVmYXVsdCBncmVlbgogIGxldCB0aXRsZUljb24gPSAi8J+TpiI7CiAgbGV0IGNoYW5nZUljb24gPSAi8J+ThCI7CiAgbGV0IHRpdGxlVGV4dCA9IGBQdXNoZWQgdG8gJHtyZXBvc2l0b3J5Lm5hbWV9OiR7c2hvcnRCcmFuY2h9YDsKICBsZXQgc2hvd0RpZmYgPSB0cnVlOwoKICAvLyAtLS0gU3BlY2lhbCBtb2RlcyAtLS0KICBpZiAoaXNXaGl0ZUZpbGUpIHsKICAgIGFjY2VudENvbG9yID0gMHhmZmZmZmY7CiAgICBzZWNvbmRhcnlDb2xvciA9IDB4ZWVlZWVlOwogICAgdGl0bGVJY29uID0gIvCfpI0iOwogICAgdGl0bGVUZXh0ID0gIkRhdGFiYXNlIFVwZGF0ZWQiOwogICAgc2hvd0RpZmYgPSBmYWxzZTsKCiAgfSBlbHNlIGlmIChpc1ByaW1hcnlGaWxlKSB7CiAgICBhY2NlbnRDb2xvciA9IDB4ZmY0NDQ0OyAvLyByZWQKICAgIHNlY29uZGFyeUNvbG9yID0gMHgwMGZmZmY7IC8vIGN5YW4KICAgIHRpdGxlSWNvbiA9ICLinaTvuI/wn5KZIjsKICAgIHRpdGxlVGV4dCA9ICJQcmltYXJ5IERhdGFiYXNlIFVwZGF0ZWQiOwogICAgc2hvd0RpZmYgPSBmYWxzZTsKCiAgfSBlbHNlIGlmIChpc01vdGRGaWxlKSB7CiAgICBhY2NlbnRDb2xvciA9IDB4ZmZjYzAwOyAgICAgIC8vIGdvbGQKICAgIHNlY29uZGFyeUNvbG9yID0gMHhmZmRkNTU7ICAgLy8gbGlnaHQgZ29sZAogICAgdGl0bGVJY29uID0gIvCfl57vuI8iOyAgICAgICAgICAgIC8vIGFubm91bmNlbWVudC1zdHlsZSBpY29uCiAgICB0aXRsZVRleHQgPSAiTWVzc2FnZSBPZiBUaGUgRGF5IENvbmZpZyBVcGRhdGVkIjsKICAgIHNob3dEaWZmID0gZmFsc2U7CiAgfQoKICAvLyBDb21taXQgc3VtbWFyeQogIGNvbnN0IGNvbW1pdExpbmVzID0gY29tbWl0cwogICAgLm1hcChjID0+IGBbXGAke2MuaWQuc2xpY2UoMCwgNyl9XGBdKCR7Yy51cmx9KSDigJQgJHtjLm1lc3NhZ2Uuc3BsaXQoIlxuIilbMF19YCkKICAgIC5qb2luKCJcbiIpOwoKICAvLyAtLS0gTWFpbiBFbWJlZCAtLS0KICBlbWJlZHMucHVzaCh7CiAgICBhdXRob3IsCiAgICB0aXRsZTogYCR7dGl0bGVJY29ufSAke3RpdGxlVGV4dH1gLAogICAgZGVzY3JpcHRpb246CiAgICAgIGAqKkJ5OioqICR7cHVzaGVyLm5hbWUgfHwgcHVzaGVyLmVtYWlsfVxuYCArCiAgICAgIGAke2NvbXBhcmUgPyBgW1ZpZXcgQ2hhbmdlc10oJHtjb21wYXJlfSlgIDogIiJ9XG5cbmAgKwogICAgICBjb21taXRMaW5lcywKICAgIGNvbG9yOiBhY2NlbnRDb2xvciwKICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogIH0pOwoKICAvLyAtLS0gT3B0aW9uYWwgZmlsZSBkaWZmIHN1bW1hcnkgKHNraXBwZWQgaW4gc3BlY2lhbCBtb2RlcykgLS0tCiAgaWYgKHNob3dEaWZmKSB7CiAgICBjb25zdCBhZGRlZCA9IFtdLCByZW1vdmVkID0gW10sIG1vZGlmaWVkID0gW107CiAgICBmb3IgKGNvbnN0IGNvbW1pdCBvZiBjb21taXRzKSB7CiAgICAgIGFkZGVkLnB1c2goLi4uY29tbWl0LmFkZGVkKTsKICAgICAgcmVtb3ZlZC5wdXNoKC4uLmNvbW1pdC5yZW1vdmVkKTsKICAgICAgbW9kaWZpZWQucHVzaCguLi5jb21taXQubW9kaWZpZWQpOwogICAgfQoKICAgIGNvbnN0IHRvdGFsQ2hhbmdlcyA9IGFkZGVkLmxlbmd0aCArIHJlbW92ZWQubGVuZ3RoICsgbW9kaWZpZWQubGVuZ3RoOwogICAgaWYgKHRvdGFsQ2hhbmdlcyA+IDApIHsKICAgICAgY29uc3QgbWF4U2hvd24gPSAyMDsKICAgICAgY29uc3QgZGlmZkxpbmVzID0gW107CgogICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgYWRkZWQuc2xpY2UoLW1heFNob3duKSkgZGlmZkxpbmVzLnB1c2goYCsgJHtmaWxlfWApOwogICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgcmVtb3ZlZC5zbGljZSgtbWF4U2hvd24pKSBkaWZmTGluZXMucHVzaChgLSAke2ZpbGV9YCk7CiAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBtb2RpZmllZC5zbGljZSgtbWF4U2hvd24pKSBkaWZmTGluZXMucHVzaChgfiAke2ZpbGV9YCk7CgogICAgICBpZiAodG90YWxDaGFuZ2VzID4gZGlmZkxpbmVzLmxlbmd0aCkgewogICAgICAgIGRpZmZMaW5lcy5wdXNoKGAuLi4gc2hvd2luZyBsYXN0ICR7ZGlmZkxpbmVzLmxlbmd0aH0vJHt0b3RhbENoYW5nZXN9IGNoYW5nZXMgLi4uYCk7CiAgICAgIH0KCiAgICAgIGVtYmVkcy5wdXNoKHsKICAgICAgICBhdXRob3IsCiAgICAgICAgdGl0bGU6IGDwn5OEIEZpbGUgQ2hhbmdlc2AsCiAgICAgICAgZGVzY3JpcHRpb246ICJgYGBkaWZmXG4iICsgZGlmZkxpbmVzLmpvaW4oIlxuIikgKyAiXG5gYGAiLAogICAgICAgIGNvbG9yOiBzZWNvbmRhcnlDb2xvciwKICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgfSk7CiAgICB9CiAgfQp9"
}
